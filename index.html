<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>SHUDH DESI ‚Ä¢ Restaurant POS (Web)</title>
  <link rel="stylesheet" href="styles.css"/>
</head>
<body>
  <header class="topbar">
    <h1>üçΩÔ∏è SHUDH DESI</h1>
    <nav class="tabs">
      <button class="tab-btn active" data-tab="home">Home</button>
      <button class="tab-btn" data-tab="order">New Order</button>
      <button class="tab-btn" data-tab="menu">My Menu</button>
      <button class="tab-btn" data-tab="sales">Daily Sales</button>
      <button class="tab-btn" data-tab="edit">Edit Menu</button>
      <button class="tab-btn" data-tab="edit-sales">Edit Sales Data</button>
    </nav>
  </header>

  <main>
    <!-- Home -->
    <section id="tab-home" class="tab active">
      <div class="hero">
        <div class="hero-title">Welcome to <strong>SHUDH DESI</strong></div>
        <div class="hero-sub">Fast POS ‚Ä¢ Works offline ‚Ä¢ Syncs to Google Sheets</div>
        <div class="home-buttons">
          <button class="btn hero-btn" data-goto="order">New Order</button>
          <button class="btn hero-btn" data-goto="menu">My Menu</button>
          <button class="btn hero-btn" data-goto="sales">Daily Sales</button>
          <button class="btn hero-btn" data-goto="edit">Edit Menu</button>
          <button class="btn hero-btn" data-goto="edit-sales">Edit Sales Data</button>
        </div>
      </div>
    </section>

    <!-- My Menu -->
    <section id="tab-menu" class="tab">
      <h2 class="section-title">My Menu</h2>
      <div id="menu-grid" class="grid"></div>
    </section>

    <!-- New Order -->
    <section id="tab-order" class="tab">
      <h2 class="section-title">New Order</h2>
      <div class="order-layout">
        <div class="menu-pane">
          <div class="row space-between">
            <h3>Menu</h3>
            <input id="search" placeholder="Search item..." />
          </div>
          <div id="menu-for-order" class="grid"></div>
        </div>
        <div class="cart-pane">
          <h3>Order Summary</h3>
          <div id="cart-list" class="cart-list"></div>
          <div class="cart-total">
            <div class="row space-between">
              <div>Subtotal:</div>
              <div>‚Çπ<span id="subtotal">0.00</span></div>
            </div>
            <div class="row">
              <button id="clear-cart" class="btn secondary">Clear</button>
              <button id="submit-order" class="btn primary">Submit Order</button>
            </div>
            <small class="muted">On submit: order is saved locally and sent to Google Sheets instantly.</small>
            <div id="submit-status" class="status"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Daily Sales -->
    <section id="tab-sales" class="tab">
      <h2 class="section-title">Daily Sales</h2>
      <div class="sales-header">
        <div>
          <label for="sales-date" class="muted">Date:</label>
          <input type="date" id="sales-date"/>
        </div>
        <button id="export-csv" class="btn">Export CSV</button>
      </div>
      <div class="sales-cards">
        <div class="card stat">
          <div class="stat-label">Total Revenue</div>
          <div class="stat-value">‚Çπ<span id="sales-total">0.00</span></div>
        </div>
        <div class="card stat">
          <div class="stat-label">Total Items Sold</div>
          <div class="stat-value"><span id="sales-qty">0</span></div>
        </div>
      </div>
      <h3>Per-item Sales</h3>
      <table class="table">
        <thead>
          <tr><th>Item</th><th>Qty</th><th>Sales (‚Çπ)</th></tr>
        </thead>
        <tbody id="sales-tbody"></tbody>
      </table>
      <small class="muted">Note: Sales view aggregates orders saved locally for the selected date. Each order is also sent to Google Sheets.</small>
    </section>

    <!-- Edit Menu -->
    <section id="tab-edit" class="tab">
      <div class="row space-between">
        <h2 class="section-title">Manage Menu</h2>
        <button id="add-item-btn" class="btn primary">+ Add Item</button>
      </div>
      <table class="table">
        <thead>
          <tr><th>Image</th><th>Name</th><th>Price (‚Çπ)</th><th>ID</th><th>Actions</th></tr>
        </thead>
        <tbody id="edit-tbody"></tbody>
      </table>
      <details class="mt">
        <summary>Manager PIN (optional)</summary>
        <div class="row">
          <input id="manager-pin" placeholder="Set/Enter Manager PIN"/>
          <button id="save-pin" class="btn">Save PIN</button>
        </div>
        <small class="muted">If a PIN is set, editing/deleting items requires entering the PIN.</small>
      </details>
    </section>

    <!-- Edit Sales Data (local) -->
    <section id="tab-edit-sales" class="tab">
      <h2 class="section-title">Edit Sales Data (Local)</h2>
      <div class="sales-header">
        <div>
          <label for="edit-sales-date" class="muted">Date:</label>
          <input type="date" id="edit-sales-date"/>
        </div>
        <div class="row">
          <button id="refresh-edit-sales" class="btn">Refresh</button>
        </div>
      </div>

      <div id="orders-list" class="orders-list"></div>
      <small class="muted">
        Changes here update local daily totals only. Already-synced rows in Google Sheets are not edited.
      </small>
    </section>
  </main>

  <!-- Item Modal -->
  <dialog id="item-modal">
    <form method="dialog" class="modal">
      <h3 id="modal-title">Add Item</h3>
      <label>Name
        <input id="modal-name" required/>
      </label>
      <label>Price (‚Çπ)
        <input id="modal-price" type="number" step="0.01" min="0" required/>
      </label>
      <label>Image URL
        <input id="modal-image" placeholder="https://..."/>
      </label>
      <div class="row space-between">
        <button value="cancel" class="btn secondary">Cancel</button>
        <button id="modal-save" class="btn primary" value="default">Save</button>
      </div>
      <input type="hidden" id="modal-id"/>
    </form>
  </dialog>

  <!-- Done (Order Submitted) Modal -->
  <dialog id="done-modal">
    <form method="dialog" class="modal">
      <h3>Order Submitted üéâ</h3>
      <p>Order has been synced to Google Sheets and saved locally.</p>
      <p><small id="done-orderid" class="muted"></small></p>
      <div class="row" style="justify-content:flex-end">
        <button class="btn primary" value="default">Done</button>
      </div>
    </form>
  </dialog>

  <footer class="footer">
    <span>SHUDH DESI ‚Ä¢ Fast service ‚Ä¢ Offline-ready ‚Ä¢ Google Sheets sync</span>
  </footer>

  <script src="app.js"></script>
</body>
</html>
